name = "tsd-admin"
# Use a supported date to avoid runtime fallback warnings.
compatibility_date = "2026-01-07"

# Pages output directory (vanilla HTML/CSS/JS â€” no build step needed)
pages_build_output_dir = "public"

[vars]
# Local dev only: bypass Access when no CF_Authorization token is present.
# Remove or set to "0" in production where Cloudflare Access protects the admin hostname.
ADMIN_BYPASS_ACCESS = "1"

# Bind D1 for admin APIs
[[d1_databases]]
binding = "UPDATES_DB"
database_name = "tsd_updates"
database_id = "bb376db4-497c-4ac3-9761-675b8a537422"  # replace if needed

# Access settings are enforced via Cloudflare Access policies at the edge.
# API handlers will also validate CF Access JWT (CF_Authorization / Cf-Access-Jwt-Assertion).
