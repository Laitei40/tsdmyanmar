/* ============================================================
   updates.css — News & Updates listing + archive
   Clean, modern card-grid design · mobile-first · theme-aware
   ============================================================ */

/* ---- Tokens ---- */
:root {
  --u-bg:         var(--bg);
  --u-surface:    var(--card-bg);
  --u-ink:        var(--text);
  --u-muted:      var(--muted);
  --u-accent:     #0b6ef6;
  --u-accent-rgb: 11,110,246;
  --u-green-rgb:  16,185,129;
  --u-border:     rgba(15,23,42,.08);
  --u-radius:     16px;
  --u-radius-sm:  10px;
  --u-shadow:     0 1px 3px rgba(0,0,0,.06), 0 8px 24px rgba(0,0,0,.04);
  --u-shadow-lg:  0 4px 6px rgba(0,0,0,.04), 0 20px 50px rgba(0,0,0,.07);
}
[data-theme="dark"] {
  --u-border:     rgba(255,255,255,.08);
  --u-shadow:     0 1px 3px rgba(0,0,0,.3), 0 8px 24px rgba(0,0,0,.25);
  --u-shadow-lg:  0 4px 6px rgba(0,0,0,.25), 0 20px 50px rgba(0,0,0,.35);
}

/* ---- Page shell ---- */
.updates-page-shell {
  position: relative;
  min-height: 100vh;
  background: var(--u-bg);
  overflow-x: hidden;
}
.updates-aurora {
  position: absolute; inset: 0; pointer-events: none;
  background:
    radial-gradient(ellipse 60% 40% at 15% 0%, rgba(var(--u-accent-rgb),.06), transparent 60%),
    radial-gradient(ellipse 50% 50% at 85% 5%, rgba(var(--u-green-rgb),.05), transparent 55%);
}
[data-theme="dark"] .updates-aurora { opacity: .35; }

/* ---- Layout ---- */
.updates-page { position: relative; padding: 2rem 0 4rem; color: var(--u-ink); }
.updates-layout { width: min(1140px, 100% - 2rem); margin-inline: auto; }

/* ==========  HERO SECTION  ========== */
.updates-hero {
  padding: 3rem 0 1.5rem;
  text-align: center;
}
.updates-hero .eyebrow {
  display: inline-flex; align-items: center; gap: .4rem;
  padding: .3rem .8rem; border-radius: 999px;
  background: rgba(var(--u-accent-rgb),.08);
  color: var(--u-accent);
  font-weight: 700; font-size: .8rem; letter-spacing: .06em; text-transform: uppercase;
  margin-bottom: .25rem;
}
.updates-hero h1 {
  margin: .5rem 0 .4rem;
  font-size: clamp(1.8rem, 4vw, 2.8rem);
  font-weight: 800; line-height: 1.15;
  letter-spacing: -.015em;
}
.updates-hero .lead {
  max-width: 58ch; margin: 0 auto 1.5rem;
  color: var(--u-muted); font-size: 1.05rem; line-height: 1.65;
}

/* ---- Search ---- */
.hero-controls {
  display: flex; flex-wrap: wrap; gap: .75rem;
  align-items: center; justify-content: center;
  max-width: 600px; margin: 0 auto;
}
.hero-controls .search { position: relative; flex: 1 1 280px; }
.hero-controls .search input {
  width: 100%; padding: .7rem 1rem .7rem 2.5rem;
  border-radius: var(--u-radius-sm);
  border: 1px solid var(--u-border);
  background: var(--u-surface); color: var(--u-ink);
  font-size: .95rem;
  box-shadow: var(--u-shadow);
  transition: border-color .15s, box-shadow .15s;
}
.hero-controls .search input:focus-visible {
  outline: none;
  border-color: rgba(var(--u-accent-rgb),.45);
  box-shadow: 0 0 0 3px rgba(var(--u-accent-rgb),.12);
}
.hero-controls .search::before {
  content: ''; position: absolute; left: .85rem; top: 50%; transform: translateY(-50%);
  width: 16px; height: 16px; opacity: .55;
  background: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' fill='none' stroke='%236B7280' stroke-width='2' viewBox='0 0 24 24'><circle cx='11' cy='11' r='6'/><path d='M21 21l-4.35-4.35' stroke-linecap='round'/></svg>") center/16px no-repeat;
}
.hero-meta { display: flex; gap: .5rem; flex-wrap: wrap; justify-content: center; }

/* ---- Pills ---- */
.pill {
  display: inline-flex; align-items: center; gap: .3rem;
  padding: .3rem .7rem; border-radius: 999px;
  border: 1px solid var(--u-border);
  background: var(--u-surface);
  color: var(--u-muted); font-weight: 600; font-size: .82rem;
  text-decoration: none;
  transition: border-color .15s, background .15s;
}
.pill:hover { border-color: rgba(var(--u-accent-rgb),.25); }
.pill-ghost { background: transparent; border-color: transparent; }
.pill-link { color: var(--u-ink); }

/* ==========  FILTER BAR  ========== */
.filter-bar {
  position: sticky; top: 72px; z-index: 30;
  margin: 0 auto 1.5rem;
  display: flex; gap: .75rem; align-items: center; justify-content: space-between;
  padding: .6rem .85rem;
  border-radius: var(--u-radius-sm);
  border: 1px solid var(--u-border);
  background: color-mix(in srgb, var(--u-surface) 88%, transparent);
  -webkit-backdrop-filter: blur(12px); backdrop-filter: blur(12px);
  box-shadow: var(--u-shadow);
}
.filter-bar .filter-group { display: flex; gap: .5rem; flex-wrap: wrap; }
.filter-bar select {
  padding: .45rem .65rem; border-radius: 8px;
  border: 1px solid var(--u-border);
  background: var(--u-surface); color: var(--u-ink);
  font-size: .88rem; min-width: 130px;
  transition: border-color .15s, box-shadow .15s;
}
.filter-bar select:focus-visible {
  outline: none;
  border-color: rgba(var(--u-accent-rgb),.45);
  box-shadow: 0 0 0 3px rgba(var(--u-accent-rgb),.12);
}
.status { color: var(--u-muted); font-size: .85rem; font-weight: 600; }

/* ==========  FEATURED CARD  ========== */
.featured-card {
  position: relative; overflow: hidden;
  border-radius: var(--u-radius);
  border: 1px solid var(--u-border);
  background: var(--u-surface);
  box-shadow: var(--u-shadow-lg);
  margin-bottom: 2rem;
  display: grid; grid-template-columns: 1fr;
  transition: transform .2s ease, box-shadow .2s ease;
}
.featured-card:hover { transform: translateY(-3px); }

.featured-image-wrap {
  position: relative; overflow: hidden;
  aspect-ratio: 21/9;
  background: linear-gradient(135deg, rgba(var(--u-accent-rgb),.08), rgba(var(--u-green-rgb),.06));
}
.featured-image {
  width: 100%; height: 100%; object-fit: cover;
  display: block;
}
/* Gradient overlay on image */
.featured-image-wrap::after {
  content: ''; position: absolute; inset: 0;
  background: linear-gradient(0deg, rgba(0,0,0,.35) 0%, transparent 60%);
  pointer-events: none;
}
.featured-body { padding: 1.5rem 1.75rem 1.75rem; }

.featured-meta {
  display: flex; gap: .5rem; align-items: center; flex-wrap: wrap;
  margin-bottom: .35rem;
}
.featured-chip {
  display: inline-flex; align-items: center; gap: .3rem;
  padding: .25rem .65rem; border-radius: 999px;
  background: rgba(var(--u-accent-rgb),.1);
  color: var(--u-accent); font-weight: 700; font-size: .75rem;
  text-transform: uppercase; letter-spacing: .04em;
}
.featured-date { color: var(--u-muted); font-weight: 600; font-size: .85rem; }
.featured-title {
  margin: .15rem 0 .3rem;
  font-size: clamp(1.3rem, 2.5vw, 1.8rem);
  font-weight: 800; line-height: 1.25;
}
.featured-lead {
  margin: 0 0 1rem; color: var(--u-muted); line-height: 1.65;
  max-width: 65ch; font-size: .95rem;
}
.featured-actions { display: flex; gap: .6rem; flex-wrap: wrap; }

/* ==========  CARD GRID  ========== */
.updates-list {
  display: grid; gap: 1.25rem;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  list-style: none; padding: 0; margin: 0 auto 2rem;
}
.updates-list::before { display: none; }

.update-card {
  background: var(--u-surface);
  border: 1px solid var(--u-border);
  border-radius: var(--u-radius);
  display: flex; flex-direction: column;
  box-shadow: var(--u-shadow);
  transition: transform .2s ease, box-shadow .2s ease, border-color .2s ease;
  overflow: hidden; cursor: default;
}
.update-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--u-shadow-lg);
  border-color: rgba(var(--u-accent-rgb),.18);
}
.update-card.visible,
.featured-card.visible { animation: fadeUp .35s ease both; }
@keyframes fadeUp { from { opacity: 0; transform: translateY(14px); } to { opacity: 1; transform: none; } }

/* Card thumbnail */
.card-thumb {
  width: 100%; aspect-ratio: 16/9; object-fit: cover;
  display: block;
  background: linear-gradient(135deg, rgba(var(--u-accent-rgb),.06), rgba(var(--u-green-rgb),.04));
}

/* Card content */
.card-content { padding: 1.1rem 1.25rem 1.25rem; display: flex; flex-direction: column; gap: .4rem; flex: 1; }
.card-header { display: flex; gap: .5rem; align-items: center; flex-wrap: wrap; }
.card-header .badge {
  display: inline-flex; align-items: center; gap: .25rem;
  padding: .18rem .55rem; border-radius: 999px;
  background: rgba(var(--u-accent-rgb),.08);
  color: var(--u-accent); font-weight: 700; font-size: .72rem;
  text-transform: uppercase; letter-spacing: .04em;
}
.card-header .update-date { font-size: .78rem; color: var(--u-muted); font-weight: 500; }

.update-card .update-title {
  font-size: 1.08rem; font-weight: 700; margin: 0;
  line-height: 1.3; color: var(--u-ink);
}
.update-card .update-summary {
  color: var(--u-muted); margin: 0; font-size: .9rem; line-height: 1.6;
  display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; line-clamp: 3;
  overflow: hidden;
}
.update-cta { margin-top: auto; padding-top: .5rem; }

/* ---- CTA Links ---- */
.btn-link {
  color: var(--u-accent); text-decoration: none; font-weight: 700;
  font-size: .86rem;
  display: inline-flex; align-items: center; gap: .35rem;
  transition: gap .15s ease;
}
.btn-link::after { content: '→'; transition: transform .15s ease; }
.btn-link:hover::after { transform: translateX(3px); }
.btn-link:focus-visible { outline: 2px solid rgba(var(--u-accent-rgb),.3); outline-offset: 3px; border-radius: 4px; }

.btn-primary {
  display: inline-flex; align-items: center; justify-content: center;
  padding: .7rem 1.3rem; border-radius: var(--u-radius-sm);
  background: var(--u-accent); color: #fff; font-weight: 700;
  text-decoration: none; font-size: .9rem;
  box-shadow: 0 4px 14px rgba(var(--u-accent-rgb),.22);
  transition: transform .15s, box-shadow .15s;
}
.btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(var(--u-accent-rgb),.3); }

/* ==========  LOAD MORE  ========== */
#updates-load-more {
  display: inline-flex; align-items: center; justify-content: center; gap: .5rem;
  margin: 1rem auto 2rem; padding: .7rem 1.4rem;
  border-radius: var(--u-radius-sm);
  background: var(--u-accent); color: #fff; border: 0; cursor: pointer;
  font-weight: 700; font-size: .9rem;
  box-shadow: 0 4px 14px rgba(var(--u-accent-rgb),.2);
  transition: transform .15s, box-shadow .15s, opacity .15s;
}
#updates-load-more:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(var(--u-accent-rgb),.28); }
#updates-load-more:disabled { opacity: .45; cursor: default; transform: none; box-shadow: none; }

.btn-loading { position: relative; }
.btn-loading::after {
  content: ''; position: absolute; right: 12px; top: 50%; transform: translateY(-50%);
  width: 14px; height: 14px; border-radius: 50%;
  border: 2px solid rgba(255,255,255,.5); border-top-color: transparent;
  animation: spin .7s linear infinite;
}
@keyframes spin { to { transform: translateY(-50%) rotate(360deg); } }

/* ==========  SKELETONS  ========== */
.skeleton-card {
  border-radius: var(--u-radius); height: 280px;
  background: linear-gradient(90deg, rgba(0,0,0,.04) 25%, rgba(0,0,0,.07) 37%, rgba(0,0,0,.04) 63%);
  background-size: 400% 100%; animation: shimmer 1.4s ease infinite;
  border: 1px solid var(--u-border);
}
[data-theme="dark"] .skeleton-card {
  background: linear-gradient(90deg, rgba(255,255,255,.03) 25%, rgba(255,255,255,.06) 37%, rgba(255,255,255,.03) 63%);
  background-size: 400% 100%;
}
@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

/* ==========  EMPTY STATE  ========== */
.empty-state {
  padding: 3rem 1.5rem; text-align: center;
  color: var(--u-muted);
  background: var(--u-surface);
  border: 1px solid var(--u-border);
  border-radius: var(--u-radius);
  box-shadow: var(--u-shadow);
}

/* ==========  YEAR LABEL  ========== */
.year {
  font-weight: 700; margin: 1.5rem 0 .5rem;
  font-size: .88rem; color: var(--u-muted);
  letter-spacing: .03em; text-transform: uppercase;
}
.year::after {
  content: ''; display: block; width: 32px; height: 2px;
  background: rgba(var(--u-accent-rgb),.25); margin-top: 6px; border-radius: 99px;
}

/* ==========  ARCHIVE  ========== */
.archive-list { display: flex; flex-direction: column; gap: 1.2rem; margin: 0 auto 3rem; }
.archive-year {
  font-weight: 800; color: var(--u-muted); font-size: .88rem;
  display: flex; align-items: center; gap: .6rem; letter-spacing: .03em;
}
.archive-year::after { content: ''; flex: 1; height: 1px; background: var(--u-border); }
.archive-year-block { display: grid; gap: .8rem; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); }
.archive-card .update-title { font-size: 1rem; }

/* ==========  ACTIONS BAR  ========== */
.updates-actions { margin-top: 1rem; }

/* ==========  FOCUS STATES  ========== */
.updates-page input:focus-visible,
.updates-page select:focus-visible,
.updates-page button:focus-visible,
.updates-page a:focus-visible {
  outline: 2px solid rgba(var(--u-accent-rgb),.3);
  outline-offset: 2px;
}
.update-card:focus-within {
  outline: 2px solid rgba(var(--u-accent-rgb),.2);
  outline-offset: 3px;
}

/* ==========  RESPONSIVE  ========== */
@media (max-width: 799px) {
  .updates-list { grid-template-columns: 1fr; max-width: 520px; margin-inline: auto; }
  .featured-card { border-radius: 12px; }
  .featured-body { padding: 1.25rem; }
  .featured-title { font-size: 1.35rem; }
  .featured-image-wrap { aspect-ratio: 16/9; }
}
@media (max-width: 639px) {
  .updates-hero { padding: 2rem 0 1rem; }
  .updates-hero h1 { font-size: 1.7rem; }
  .updates-hero .lead { font-size: .95rem; }
  .filter-bar { position: relative; top: 0; flex-direction: column; align-items: stretch; }
  .hero-controls { flex-direction: column; align-items: stretch; }
  .hero-meta { justify-content: center; }
}

/* ---- Reduced motion ---- */
@media (prefers-reduced-motion: reduce) {
  .update-card, .featured-card { transition: none; }
  .update-card.visible { animation: none; }
  .skeleton-card { animation: none; }
}
