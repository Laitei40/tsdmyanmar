/* ============================================================
   update.css — Individual news article / update detail page
   Clean reading experience · mobile-first · theme-aware
   ============================================================ */

/* ---- Tokens (supplements updates.css tokens) ---- */
:root {
  --ud-accent:       #0b6ef6;
  --ud-accent-rgb:   11,110,246;
  --ud-card:         var(--card-bg, #f8fafc);
  --ud-border:       rgba(15,23,42,.08);
  --ud-shadow:       0 1px 3px rgba(0,0,0,.06), 0 12px 32px rgba(0,0,0,.05);
  --ud-shadow-lg:    0 4px 8px rgba(0,0,0,.04), 0 24px 56px rgba(0,0,0,.08);
  --ud-radius:       16px;
  --ud-radius-sm:    10px;
  --ud-max-width:    900px;
  --ud-content-width: 680px;
}
[data-theme="dark"] {
  --ud-card:    #111c2e;
  --ud-border:  rgba(255,255,255,.08);
  --ud-shadow:  0 1px 3px rgba(0,0,0,.3), 0 12px 32px rgba(0,0,0,.3);
  --ud-shadow-lg: 0 4px 8px rgba(0,0,0,.2), 0 24px 56px rgba(0,0,0,.4);
}

/* ---- Page background ---- */
.update-page {
  position: relative;
  padding: 0 0 4rem;
  color: var(--text);
}
.update-layout { width: min(var(--ud-max-width), 100% - 2rem); margin-inline: auto; }

/* ==========  HERO / HEADER  ========== */
.update-hero {
  width: min(1140px, 100% - 2rem);
  margin: 1.5rem auto 1.5rem;
  padding: 1.5rem 1.75rem 1.5rem;
  border-radius: var(--ud-radius);
  background: var(--ud-card);
  border: 1px solid var(--ud-border);
  box-shadow: var(--ud-shadow);
}

/* Breadcrumb */
.crumb-row {
  display: flex; align-items: center; gap: .5rem; flex-wrap: wrap;
  margin-bottom: .75rem;
  font-size: .88rem;
}
.crumb-divider { opacity: .4; }
.crumb-current { font-weight: 600; color: var(--text); }
.pill-icon {
  width: 14px; height: 14px; display: inline-block;
  background: currentColor;
  -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M15 18l-6-6 6-6' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") center/14px no-repeat;
  mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24'%3E%3Cpath d='M15 18l-6-6 6-6' fill='none' stroke='%23000' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E") center/14px no-repeat;
}

/* Meta row */
.update-hero-meta {
  display: flex; gap: .5rem; flex-wrap: wrap; align-items: center;
  margin-bottom: .35rem;
}

/* Title */
.update-title {
  font-weight: 800;
  font-size: clamp(1.5rem, 3.5vw, 2.4rem);
  line-height: 1.2;
  color: var(--text);
  margin: .15rem 0 .35rem;
  overflow-wrap: break-word;
  letter-spacing: -.01em;
}
.update-title:focus { outline: none; }

/* Lead / summary */
.update-summary-lead {
  margin: 0;
  color: var(--muted);
  max-width: 70ch;
  line-height: 1.65;
  font-size: 1.05rem;
}

/* ==========  ARTICLE HERO IMAGE  ========== */
.article-hero {
  margin: -.25rem -1.75rem .75rem;
  border-radius: 0 0 var(--ud-radius-sm) var(--ud-radius-sm);
  overflow: hidden;
}
.article-hero:first-child {
  margin-top: -.5rem;
  border-radius: var(--ud-radius-sm);
}
.hero-figure { position: relative; margin: 0; }
.hero-image {
  display: block; width: 100%; height: auto;
  object-fit: cover; max-height: 480px;
}
.hero-caption {
  padding: .6rem 1rem;
  color: var(--muted);
  font-size: .88rem;
  background: var(--ud-card);
}

/* ==========  ARTICLE CARD  ========== */
.update-article {
  max-width: var(--ud-max-width);
  margin: 0 auto; padding: 2rem 2rem;
  border-radius: var(--ud-radius);
  background: var(--ud-card);
  border: 1px solid var(--ud-border);
  box-shadow: var(--ud-shadow-lg);
}

.update-content-wrapper {
  display: flex; flex-direction: column; gap: 2rem;
}

/* ---- Body ---- */
.update-body {
  font-size: 1.05rem;
  color: var(--text);
  line-height: 1.85;
  max-width: var(--ud-content-width);
}
.update-body p { margin: 0 0 1.25rem; }
.update-body h2 {
  font-size: 1.35rem; font-weight: 700;
  margin: 2rem 0 .75rem;
  color: var(--text);
}
.update-body h3 {
  font-size: 1.15rem; font-weight: 700;
  margin: 1.5rem 0 .6rem;
}
.update-body ul, .update-body ol {
  margin: 0 0 1.25rem; padding-left: 1.5rem;
}
.update-body li { margin-bottom: .35rem; }
.update-body blockquote {
  margin: 1.5rem 0;
  padding: 1rem 1.25rem;
  border-left: 3px solid rgba(var(--ud-accent-rgb),.3);
  background: rgba(var(--ud-accent-rgb),.03);
  border-radius: 0 var(--ud-radius-sm) var(--ud-radius-sm) 0;
  color: var(--text);
  font-style: italic;
}
.update-body a {
  color: var(--accent);
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: color .15s;
}
.update-body a:hover { color: #064ab8; }

/* ---- Aside ---- */
.update-aside { margin-top: .5rem; }

@media (min-width: 900px) {
  .update-content-wrapper { flex-direction: row; align-items: flex-start; gap: 2.5rem; }
  .update-body { flex: 1; }
  .update-aside { width: 240px; flex: 0 0 240px; position: sticky; top: 100px; }
}

/* ==========  MEDIA  ========== */
.update-body img {
  max-width: 100%; height: auto; display: block;
  margin: 1.25rem 0; border-radius: var(--ud-radius-sm);
  box-shadow: 0 4px 16px rgba(0,0,0,.06);
}
.video-wrapper {
  position: relative; padding-bottom: 56.25%; height: 0;
  overflow: hidden; border-radius: var(--ud-radius-sm); margin: 1.25rem 0;
  box-shadow: 0 4px 16px rgba(0,0,0,.06);
}
.video-wrapper iframe { position: absolute; inset: 0; width: 100%; height: 100%; border: 0; }

.video-embed { margin: 1.25rem 0; }
.video-poster { display: block; border: 0; padding: 0; background: transparent; cursor: pointer; width: 100%; }
.video-poster:focus { outline: 2px solid rgba(var(--ud-accent-rgb),.3); outline-offset: 3px; }
.video-thumb { width: 100%; height: auto; display: block; border-radius: var(--ud-radius-sm); }
.video-play { position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%); pointer-events: none; }

/* ---- Media Gallery ---- */
.media-gallery { display: grid; grid-template-columns: 1fr; gap: 12px; margin: 1.25rem 0; }
@media (min-width: 640px) { .media-gallery { grid-template-columns: repeat(2, 1fr); gap: 16px; } }
.media-figure {
  margin: 0; background: var(--ud-card);
  padding: 6px; border-radius: var(--ud-radius-sm);
  border: 1px solid var(--ud-border);
}
.media-figure img { border-radius: 8px; display: block; width: 100%; height: auto; }
.media-caption { font-size: .85rem; color: var(--muted); margin-top: 6px; padding: 0 2px; }

/* Image fallback */
.img-fallback {
  display: flex; align-items: center; justify-content: center;
  background: var(--ud-card); color: var(--muted);
  height: 200px; border-radius: var(--ud-radius-sm);
  margin: 1rem 0; border: 1px solid var(--ud-border);
  font-size: .9rem;
}

/* ==========  DOWNLOADS / CTAs  ========== */
.download-ctas { display: flex; flex-direction: column; gap: .6rem; }
.btn-download {
  display: inline-flex; align-items: center; gap: .5rem;
  padding: .6rem .85rem; border-radius: var(--ud-radius-sm);
  background: var(--ud-accent); color: #fff;
  text-decoration: none; font-weight: 650; font-size: .88rem;
  box-shadow: 0 4px 12px rgba(var(--ud-accent-rgb),.2);
  transition: transform .15s, box-shadow .15s;
}
.btn-download:hover { transform: translateY(-2px); box-shadow: 0 6px 18px rgba(var(--ud-accent-rgb),.28); }
.btn-download svg { width: 16px; height: 16px; flex: 0 0 16px; }

/* ==========  SKELETONS  ========== */
.skeleton {
  animation: ud-shimmer 1.4s ease infinite;
  background: linear-gradient(90deg, rgba(0,0,0,.05) 25%, rgba(0,0,0,.08) 37%, rgba(0,0,0,.05) 63%);
  background-size: 400% 100%;
  border-radius: 6px;
}
[data-theme="dark"] .skeleton {
  background: linear-gradient(90deg, rgba(255,255,255,.04) 25%, rgba(255,255,255,.07) 37%, rgba(255,255,255,.04) 63%);
  background-size: 400% 100%;
}
.skel-title { height: 32px; width: 65%; margin-bottom: 10px; }
.skel-meta  { height: 14px; width: 25%; margin-bottom: 18px; }
.skel-para  { height: 14px; width: 100%; margin: 0 0 12px; }
@keyframes ud-shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }

/* ==========  SHARE BAR  ========== */
.share-bar {
  display: flex; align-items: center; gap: .6rem; flex-wrap: wrap;
  margin-top: 2rem; padding-top: 1.25rem;
  border-top: 1px solid var(--ud-border);
}
.share-bar span { font-weight: 700; font-size: .85rem; color: var(--muted); }
.share-btn {
  display: inline-flex; align-items: center; justify-content: center;
  width: 36px; height: 36px; border-radius: 50%;
  border: 1px solid var(--ud-border);
  background: var(--ud-card); color: var(--muted);
  cursor: pointer; transition: border-color .15s, color .15s;
  text-decoration: none;
}
.share-btn:hover { border-color: rgba(var(--ud-accent-rgb),.3); color: var(--ud-accent); }
.share-btn svg { width: 16px; height: 16px; }

/* ==========  RELATED POSTS  ========== */
.related-section {
  max-width: var(--ud-max-width);
  margin: 2.5rem auto 0;
  padding: 0 1rem;
}
.related-section h2 {
  font-size: 1.2rem; font-weight: 700;
  margin-bottom: 1rem;
}
.related-grid {
  display: grid; gap: 1rem;
  grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
}
.related-card {
  background: var(--ud-card);
  border: 1px solid var(--ud-border);
  border-radius: var(--ud-radius-sm);
  padding: 0;
  display: flex; flex-direction: column; gap: 0;
  transition: transform .15s, box-shadow .15s;
  text-decoration: none; color: inherit;
  overflow: hidden;
}
.related-card:hover { transform: translateY(-3px); box-shadow: var(--ud-shadow); }
.related-card .related-thumb {
  width: 100%; height: auto; aspect-ratio: 16/9;
  object-fit: cover; display: block;
}
.related-card .related-date { font-size: .78rem; color: var(--muted); padding: .75rem 1rem 0; }
.related-card .related-title { font-size: .95rem; font-weight: 700; color: var(--text); line-height: 1.3; padding: .25rem 1rem .85rem; }

/* ==========  UTILITIES  ========== */
.small-muted { font-size: .88rem; color: var(--muted); }
.hidden { display: none !important; }
.center { display: flex; align-items: center; justify-content: center; }

/* ==========  FOCUS  ========== */
.update-page a:focus-visible,
.update-page button:focus-visible {
  outline: 2px solid rgba(var(--ud-accent-rgb),.3);
  outline-offset: 2px;
}

/* ==========  RESPONSIVE  ========== */
@media (max-width: 639px) {
  .update-hero { padding: 1.25rem; margin-top: 1rem; }
  .update-title { font-size: 1.4rem; }
  .update-article { padding: 1.25rem; }
  .update-body { font-size: 1rem; line-height: 1.75; }
  .article-hero { margin-left: -1.25rem; margin-right: -1.25rem; }
  .hero-image { max-height: 300px; }
}

/* ---- Reduced motion ---- */
@media (prefers-reduced-motion: reduce) {
  .skeleton { animation: none; }
  .related-card { transition: none; }
}
